<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/hexo_blog/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/hexo_blog/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/hexo_blog/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/hexo_blog/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/hexo_blog/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/hexo_blog/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/hexo_blog/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="Serviceçš„æ¦‚å¿µæœ‰ç‚¹å¤šï¼Œå†…å®¹ï¼Œå•ç‹¬æ‹å‡ºæ¥åšä¸€ç¯‡ã€‚ å‚è€ƒé“¾æ¥  åè¯è§£é‡Š Services Kubernetes Serviceè¯¦è§£  ä¸ºä»€ä¹ˆéœ€è¦service æŒ‰ç…§å‚è€ƒé“¾æ¥2é‡Œé¢çš„è§£é‡Šï¼Œå€’æ˜¯å¾ˆå®¹æ˜“ç†è§£ã€‚PODå¯ä»¥èµ·å¾ˆå¤šä¸ªï¼Œæ˜¯å®ä½“ï¼Œè¿˜ä¸€ä¼šæœ‰ä¸€ä¼šæ²¡çš„ã€‚ è€Œserviceæ˜¯æš´éœ²æœåŠ¡çš„ï¼Œè¿™ä¹ˆè¯´ï¼Œåº”è¯¥åªæœ‰ä¸€ä¸ªserviceæ‰å¯¹å§ã€‚ç…ç€ç¡®å®å¦‚æ­¤å•Šã€‚ Services serviceæ˜¯K8sé‡Œé¢ä¸€ä¸ªéå¸¸é‡è¦">
<meta property="og:type" content="article">
<meta property="og:title" content="K8s Service">
<meta property="og:url" content="https://sallyslove.github.io/hexo_blog/2019/10/11/K8s-Service/index.html">
<meta property="og:site_name" content="è·¬æ­¥">
<meta property="og:description" content="Serviceçš„æ¦‚å¿µæœ‰ç‚¹å¤šï¼Œå†…å®¹ï¼Œå•ç‹¬æ‹å‡ºæ¥åšä¸€ç¯‡ã€‚ å‚è€ƒé“¾æ¥  åè¯è§£é‡Š Services Kubernetes Serviceè¯¦è§£  ä¸ºä»€ä¹ˆéœ€è¦service æŒ‰ç…§å‚è€ƒé“¾æ¥2é‡Œé¢çš„è§£é‡Šï¼Œå€’æ˜¯å¾ˆå®¹æ˜“ç†è§£ã€‚PODå¯ä»¥èµ·å¾ˆå¤šä¸ªï¼Œæ˜¯å®ä½“ï¼Œè¿˜ä¸€ä¼šæœ‰ä¸€ä¼šæ²¡çš„ã€‚ è€Œserviceæ˜¯æš´éœ²æœåŠ¡çš„ï¼Œè¿™ä¹ˆè¯´ï¼Œåº”è¯¥åªæœ‰ä¸€ä¸ªserviceæ‰å¯¹å§ã€‚ç…ç€ç¡®å®å¦‚æ­¤å•Šã€‚ Services serviceæ˜¯K8sé‡Œé¢ä¸€ä¸ªéå¸¸é‡è¦">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-10-22T03:23:34.397Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="K8s Service">
<meta name="twitter:description" content="Serviceçš„æ¦‚å¿µæœ‰ç‚¹å¤šï¼Œå†…å®¹ï¼Œå•ç‹¬æ‹å‡ºæ¥åšä¸€ç¯‡ã€‚ å‚è€ƒé“¾æ¥  åè¯è§£é‡Š Services Kubernetes Serviceè¯¦è§£  ä¸ºä»€ä¹ˆéœ€è¦service æŒ‰ç…§å‚è€ƒé“¾æ¥2é‡Œé¢çš„è§£é‡Šï¼Œå€’æ˜¯å¾ˆå®¹æ˜“ç†è§£ã€‚PODå¯ä»¥èµ·å¾ˆå¤šä¸ªï¼Œæ˜¯å®ä½“ï¼Œè¿˜ä¸€ä¼šæœ‰ä¸€ä¼šæ²¡çš„ã€‚ è€Œserviceæ˜¯æš´éœ²æœåŠ¡çš„ï¼Œè¿™ä¹ˆè¯´ï¼Œåº”è¯¥åªæœ‰ä¸€ä¸ªserviceæ‰å¯¹å§ã€‚ç…ç€ç¡®å®å¦‚æ­¤å•Šã€‚ Services serviceæ˜¯K8sé‡Œé¢ä¸€ä¸ªéå¸¸é‡è¦">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/hexo_blog/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://sallyslove.github.io/hexo_blog/2019/10/11/K8s-Service/">





  <title>K8s Service | è·¬æ­¥</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/hexo_blog/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">è·¬æ­¥</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">ä¸ç§¯è·¬æ­¥ï¼Œæ— ä»¥è‡³åƒé‡Œ</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/hexo_blog/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/hexo_blog/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/hexo_blog/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            å½’æ¡£
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://sallyslove.github.io/hexo_blog/hexo_blog/2019/10/11/K8s-Service/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lynn Shen">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/hexo_blog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="è·¬æ­¥">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">K8s Service</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-10-11T16:40:09+08:00">
                2019-10-11
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/hexo_blog/categories/docker/" itemprop="url" rel="index">
                    <span itemprop="name">docker</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>Serviceçš„æ¦‚å¿µæœ‰ç‚¹å¤šï¼Œå†…å®¹ï¼Œå•ç‹¬æ‹å‡ºæ¥åšä¸€ç¯‡ã€‚</p>
<h2 id="å‚è€ƒé“¾æ¥"><a class="header-anchor" href="#å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2>
<ul>
<li><a href="https://www.kubernetes.org.cn/kubernetes-services" target="_blank" rel="noopener">åè¯è§£é‡Š Services</a></li>
<li><a href="https://segmentfault.com/a/1190000019376912" target="_blank" rel="noopener">Kubernetes Serviceè¯¦è§£</a></li>
</ul>
<h2 id="ä¸ºä»€ä¹ˆéœ€è¦service"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆéœ€è¦service"></a>ä¸ºä»€ä¹ˆéœ€è¦service</h2>
<p>æŒ‰ç…§å‚è€ƒé“¾æ¥2é‡Œé¢çš„è§£é‡Šï¼Œå€’æ˜¯å¾ˆå®¹æ˜“ç†è§£ã€‚PODå¯ä»¥èµ·å¾ˆå¤šä¸ªï¼Œæ˜¯å®ä½“ï¼Œè¿˜ä¸€ä¼šæœ‰ä¸€ä¼šæ²¡çš„ã€‚<br>
è€Œserviceæ˜¯æš´éœ²æœåŠ¡çš„ï¼Œè¿™ä¹ˆè¯´ï¼Œåº”è¯¥åªæœ‰ä¸€ä¸ªserviceæ‰å¯¹å§ã€‚ç…ç€ç¡®å®å¦‚æ­¤å•Šã€‚</p>
<h2 id="services"><a class="header-anchor" href="#services"></a>Services</h2>
<p>serviceæ˜¯K8sé‡Œé¢ä¸€ä¸ªéå¸¸é‡è¦çš„æ¦‚å¿µã€‚ç±»å‹æ¯”è¾ƒå¤šã€‚K8sä¸­æ–‡æ–‡æ¡£é‡Œé¢çš„åè¯è§£é‡Šè¿˜æ˜¯æ¯”è¾ƒæ¸…æ¥šçš„ï¼Œå¹¶ä¸”ç»™å‡ºäº†ä¸ºä»€ä¹ˆéœ€è¦serviceï¼Œserviceå’Œpodæœ‰ä»€ä¹ˆåŒºåˆ«</p>
<ul>
<li>
<p>Kubernete Service æ˜¯ä¸€ä¸ªå®šä¹‰äº†ä¸€ç»„Podçš„ç­–ç•¥çš„æŠ½è±¡ï¼Œæˆ‘ä»¬ä¹Ÿæœ‰æ—¶å€™å«åšå®è§‚æœåŠ¡ã€‚è¿™äº›è¢«æœåŠ¡æ ‡è®°çš„Podéƒ½æ˜¯ï¼ˆä¸€èˆ¬ï¼‰é€šè¿‡label Selectorå†³å®šçš„ï¼ˆä¸‹é¢æˆ‘ä»¬ä¼šè®²åˆ°æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦ä¸€ä¸ªæ²¡æœ‰label selectorçš„æœåŠ¡ï¼‰</p>
</li>
<li>
<p>A Kubernetes service is a named load balancer that proxies traffic to one or more containers.</p>
</li>
<li>
<p>The proxy works even if the containers are on different nodes. Services proxy communicate within the cluster and rarely expose ports to an outside interface.When you launch a service it looks like you cannot connect using curl or netcat unless you start it as part of Kubernetes. The recommended approach is to have a LoadBalancer service to handle external communications.<br>
<strong>å¥½å§ï¼Œè¿™æ®µè¯åŸºæœ¬æ²¡çœ‹æ‡‚ï¼Œæš‚æ—¶å°±ä¸ç®¡å®ƒäº†ã€‚serviceä¸ä»…ä»…æ˜¯load balancerå§ï¼Œéš¾é“æ¯ä¸€ç§serviceéƒ½æ˜¯load balancerçš„ä¸€ç§ä½“ç°å—ï¼Ÿ</strong></p>
</li>
<li>
<p>Kubernetes Services are an abstract that defines a policy and approach on how to access a set of Pods. The set of Pods accessed via a Service is based on a Label Selector.</p>
</li>
<li>
<p>Serviceæœ‰å¾ˆå¤šç§ï¼ŒåŒ…æ‹¬<code>targetPort</code>ï¼Œç»å¸¸ç”¨åˆ°çš„ï¼Œè¿˜æœ‰ï¼š<code>Cluster IP</code>ï¼Œ <code>NodePort</code> ï¼Œ<code>External IPs</code>ï¼Œ <code>Load Balancer</code>ä¹‹ç±»</p>
<ul>
<li>Cluster IPçš„è§£é‡Šï¼š Cluster IP is the default approach when creating a Kubernetes Service. The service is allocated an internal IP that other components can use to access the pods.</li>
</ul>
<p><strong>cluster IPæ˜¯é»˜è®¤çš„serviceçš„ç±»å‹ã€‚è¿™ç§serviceä¼šæš´éœ²ä¸€ä¸ªinternal IPï¼Œæ¥ä¾›ç»™ç³»ç»Ÿä¸­å…¶ä»–çš„serviceæ¥è®¿é—®è¿™å †podæä¾›çš„æœåŠ¡ï¼Œæ‰€ä»¥é€šå¸¸ä¹Ÿä¼šæœ‰portçš„éšå°„.</strong></p>
<ul>
<li>
<p>Target Portçš„è§£é‡Šï¼šTarget ports allows us to separate the port the service is available on from the port the application is listening on. TargetPort is the Port which the application is configured to listen on. Port is how the application will be accessed from the outside.<br>
<strong>è¿™å›æ¯”è¾ƒæ¸…æ¥šäº†ï¼Œserviceå…¶å®æ˜¯å°†PODæä¾›çš„æœåŠ¡è½¬å‡ºæ¥ï¼Œportæ˜¯å¼€åœ¨serviceä¸Šé¢ï¼Œè¿™æ ·å…¶ä»–çš„serviceè®¿é—®è¿™ä¸ªserviceçš„æ—¶å€™å°±æ˜¯ç”¨è¿™ä¸ªportï¼Œè€Œtarget portæ˜¯å¯¹åº”åˆ°PODçš„åº”ç”¨ä¸Šé¢çš„ã€‚æ¯”å¦‚æˆ‘ä»¬è‡ªå·±äº§å“çš„åŒ—å‘ç«¯å£çš„PODï¼Œæä¾›çš„æœåŠ¡å¼€åœ¨8080ä¸Šé¢ï¼Œyamlæ–‡ä»¶é‡Œé¢èµ·çš„serviceçš„portä¹Ÿæ˜¯8080ï¼Œå…¶å®ä¹Ÿå¯ä»¥æ”¹æˆå…¶ä»–çš„</strong></p>
</li>
<li>
<p>NodePortçš„è§£é‡Šï¼šthe NodePort exposes the service on each Nodeâ€™s IP via the defined static port. No matter which Node within the cluster is accessed, the service will be reachable based on the port number defined.<br>
<strong>å°±æ˜¯<code>get Nodes</code>çš„å‘½ä»¤å‡ºæ¥çš„Nodeå§ã€‚<code>get Nodes</code>å‘½ä»¤ç»™å‡ºçš„æ˜¯<code>hostname</code>ï¼Œæˆ‘ä»¬è‡ªå·±çš„ç¯å¢ƒé‡Œé¢ï¼Œ<code>hostname</code>ä¸€èˆ¬å®šä¹‰æ ¼å¼æ˜¯<code>node-10-210-154-52</code>,åé¢è¿™ä¸ªå°±æ˜¯nodeçš„IPã€‚è¿™äº›nodeå®é™…ä¸Šæ˜¯è™šæ‹Ÿæœºã€‚æˆ–è€…æ˜¯å®ä½“æœºï¼Œç°åœ¨åº”è¯¥éƒ½æ˜¯è™šæ‹Ÿçš„nodeã€‚æ¯”å¦‚å¯ä»¥åœ¨openstackçš„nodeé›†ç¾¤ä¸Šé¢æ­å»ºk8sçš„æœåŠ¡</strong></p>
</li>
</ul>
<ul>
<li>External IPsçš„è§£é‡Šï¼šç»™å®šmaster Nodeçš„ä¸€ä¸ªIPã€‚ç„¶åThe service is now bound to the IP address and Port 80 of the master node</li>
<li>Load Balancerçš„è§£é‡Šï¼šcloud Provideréƒ½æ˜¯æœ‰è‡ªå·±çš„load Balancerçš„ã€‚å¦‚æœæ²¡æœ‰çš„è¯ï¼Œå¯ä»¥dynamically allocate IP addresses to LoadBalancer type services.When a service requests a Load Balancer, the provider will allocate one from the 10.10.0.0/26 range defined in the configuration.è¿™ä¸ªæ˜¯ç¡®å®šçš„èŒƒå›´å—</li>
<li>ç»“åˆä¸Šé¢çš„ï¼Œæˆ‘è§‰å¾—éƒ½éœ€è¦å•Šã€‚</li>
</ul>
</li>
</ul>
<h2 id="æš´éœ²serviceçš„å‘½ä»¤"><a class="header-anchor" href="#æš´éœ²serviceçš„å‘½ä»¤"></a>æš´éœ²serviceçš„å‘½ä»¤</h2>
<ul>
<li><code>kubectl expose deployment first-deployment --port=80 --type=NodePort</code>
<ul>
<li>
<p>å°†èµ„æºæš´éœ²ä¸ºæ–°çš„Kubernetes Serviceã€‚</p>
</li>
<li>
<p>exposeåé¢çš„èµ„æºæœ‰å¾ˆå¤šç§ï¼ŒåŒ…æ‹¬ï¼špodï¼ˆpoï¼‰ï¼Œserviceï¼ˆsvcï¼‰ï¼Œreplication controllerï¼ˆrcï¼‰ï¼Œdeploymentï¼ˆdeployï¼‰ï¼Œreplica setï¼ˆrsï¼‰</p>
</li>
<li>
<p>A Kubernetes service deployment has, at least, two parts. A replication controller and a service. ç¨å¾®æœ‰ç‚¹ç†è§£äº†ã€‚ä¸€ä¸ªserviceéƒ¨ç½²çš„æ—¶å€™ä¸€èˆ¬æœ‰ä¸¤ä¸ªyamlæ–‡ä»¶</p>
</li>
<li>
<p><code>first-deployment</code>æ˜¯deploymentçš„åå­—</p>
</li>
<li>
<p>port æ˜¯å†…éƒ¨çš„ç«¯å£</p>
</li>
<li>
<p>â€“target-portæ˜¯å¤–éƒ¨è®¿é—®çš„ç«¯å£</p>
</li>
<li>
<p>å®Œæ•´è¯­æ³•ä¸ºï¼š</p>
</li>
</ul>
</li>
</ul>
<pre><code>expose (-f FILENAME | TYPE NAME) [--port=port] [--protocol=TCP|UDP] [--target-port=number-or-name] [--name=name] [--external-ip=external-ip-of-service] [--type=type]
</code></pre>
<h3 id="yamlæ–‡ä»¶"><a class="header-anchor" href="#yamlæ–‡ä»¶"></a>yamlæ–‡ä»¶</h3>
<ul>
<li>å‚è€ƒé“¾æ¥äºŒä¸­çš„yamlæ–‡ä»¶çš„ä¾‹å­å¦‚ä¸‹ï¼š</li>
</ul>
<pre><code>apiVersion: v1
kind: Service
metadata:
  name: gowebsvc
spec:
  selector:
    app: goweb
  ports:
  - name: default
    protocol: TCP
    port: 80
    targetPort: 8000
  type: ClusterIP
</code></pre>
<ul>
<li><code>selector</code>æŒ‡å®šäº†æ˜¯å“ªä¸ªpodï¼Œå› ä¸ºpodå¯èƒ½æœ‰å¾ˆå¤šï¼Œæ‰€ä»¥è¿™é‡Œç”¨çš„æ˜¯podçš„tag <code>app: goweb</code>ï¼Œå°±æ˜¯è¯´ï¼Œè¿™ä¸ªserviceæ˜¯æš´éœ²æ‰€æœ‰è¿™ä¸ªtagçš„podçš„åŠŸèƒ½çš„</li>
</ul>
<h2 id="è¯·æ±‚è½¬å‘"><a class="header-anchor" href="#è¯·æ±‚è½¬å‘"></a>è¯·æ±‚è½¬å‘</h2>
<p><code>cluster ip</code>ç±»ä¼¼VIP,ä»è¿™ä¸ªåå­—æ¥è¯´ï¼Œåº”è¯¥æ˜¯è®¤ä¸ºä¸€ç»„podå°±æ˜¯ä¸€ä¸ª<code>cluster</code>ï¼Œç¡®å®ä¹Ÿå¯ä»¥å¦‚æ­¤è®¤ä¸ºã€‚æ—¢ç„¶æ˜¯ç±»ä¼¼<code>VIP</code>ï¼Œé‚£ä¹ˆå°±å¯ä»¥è¢«è®¤ä¸ºæ˜¯<code>load banlancer</code>ï¼Œé‚£ä¹ˆå°±æœ‰ç­–ç•¥çš„é—®é¢˜äº†ã€‚<br>
ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼Œå¯ä»¥æŸ¥çœ‹<code>clusterIP 10.106.202.0</code>çš„è½¬å‘ç­–ç•¥</p>
<pre><code>iptables-save | grep 10.106.202.0
</code></pre>
<p>éœ€è¦å®é™…æ“ä½œï¼Œæš‚æ—¶æ²¡æ—¶é—´ï¼Œè·³è¿‡è¿™ä¸€æ®µçš„ç»†èŠ‚ã€‚ç›®å‰å…ˆç®€å•ç†è§£ä¸€ä¸‹ï¼šå½“ä¸€æ¡<code>request</code>å‘åˆ°æŸä¸ª<code>service</code>çš„<code>cluster ip + port</code>ä¸Šé¢æ—¶ï¼Œä¼šç»è¿‡ä¸¤æ¬¡æ•°æ®é“¾è½¬å‘ï¼ˆè¿™é‡Œçš„æ•°æ®é“¾ï¼ŒæŒ‡çš„æ˜¯<code>iptables</code>é‡Œé¢çš„æ•°æ®è½¬å‘è§„åˆ™ï¼‰ï¼Œç¬¬ä¸€æ¬¡æ•°æ®é“¾è½¬å‘æ—¶å€™ä¼šè¿›è¡Œloadçš„åˆ†é…ã€‚<br>
ç¬¬ä¸€æ¡è½¬å‘é“¾å¦‚ä¸‹.<code>KUBE-SVC-SEG6BTF25PWEPDFT</code>è½¬å‘é“¾å°†requestå‡åˆ†åˆ°4ä¸ªpodä¸Šé¢ã€‚</p>
<pre><code> -A KUBE-SVC-SEG6BTF25PWEPDFT -m statistic --mode random --probability 0.25000000000 -j KUBE-SEP-5ZXTVLEM4DKNW7T2
 -A KUBE-SVC-SEG6BTF25PWEPDFT -m statistic --mode random --probability 0.33332999982 -j KUBE-SEP-EBFXI7VOCPDT2QU5
 -A KUBE-SVC-SEG6BTF25PWEPDFT -m statistic --mode random --probability 0.50000000000 -j KUBE-SEP-C3PKSXKMO2M43SPF
 -A KUBE-SVC-SEG6BTF25PWEPDFT -j KUBE-SEP-2GQCCNJGO65Z5MFS
</code></pre>
<p>ç¬¬äºŒæ¬¡è½¬å‘çš„æ—¶å€™ï¼Œä¼šå¯¹ç›®çš„åœ°åš<code>DNAT</code>ï¼ˆğŸ˜¦ å®Œå…¨ä¸çŸ¥é“è¿™æ˜¯å•¥ï¼‰ï¼Œåæ­£åšäº†è¿™ä¸ª<code>DNAT</code>ï¼Œç„¶åå°±<code>DNAT</code>åˆ°äº†<code>endpoint</code>ä¸Šé¢ã€‚</p>
<p><em>æ¯”ç…§ä¸Šé¢çš„è§„åˆ™ï¼Œå¯ä»¥çœ‹å‡º<code>KUBE-SEP-5ZXTVLEM4DKNW7T2</code>è¿™æ¡è§„åˆ™å¯¹è¯·æ±‚çš„ç›®çš„åœ°å€ä½œäº†<code>DNAT</code>åˆ°<code>10.244.1.15:8000</code>ï¼Œè¿™æ­£æ˜¯<code>goweb</code>PODç»„ä¸­<code>goweb-55c487ccd7-5t2l2</code>è¿™ä¸ªpodçš„ipåœ°å€</em></p>
<pre><code>[root@master-1 ~]# iptables-save | grep  &quot;A KUBE-SEP-5ZXTVLEM4DKNW7T2&quot; 
-A KUBE-SEP-5ZXTVLEM4DKNW7T2 -s 10.244.1.15/32 -j KUBE-MARK-MASQ
-A KUBE-SEP-5ZXTVLEM4DKNW7T2 -p tcp -m tcp -j DNAT --to-destination 10.244.1.15:8000
</code></pre>
<h3 id="endpoint"><a class="header-anchor" href="#endpoint"></a>endpoint</h3>
<ul>
<li>
<p>åœ¨serviceåˆ›å»ºçš„æ—¶å€™ï¼Œkube-proxyç»„ä»¶ï¼ˆæ¯ä¸ªk8sæœåŠ¡å™¨éƒ½ä¼šæœ‰çš„ç»„ä»¶ï¼‰ä¼šè‡ªåŠ¨åˆ›å»ºåŒåçš„endpointå¯¹è±¡ã€‚</p>
</li>
<li>
<p>åŠ¨æ€åœ°è·Ÿè¸ªåŒ¹é…selectorçš„ä¸€ç»„podå½“å‰ipï¼ˆpodçš„ipåœ¨podçš„yamlæ–‡ä»¶é‡Œé¢å¯ä»¥çŸ¥é“ï¼Œåå­—å°±æ˜¯podIPï¼‰åŠç«¯å£ï¼Œå¹¶ç”Ÿæˆç›¸åº”çš„iptables KUBE-SVC-xxxè§„åˆ™</p>
</li>
<li>
<p><code>service</code>æ˜¯ç”¨äº†endpointæ¥å¯¹podè¿›è¡ŒåŠ¨æ€çš„è·Ÿè¸ªçš„ã€‚ä¸€ä¸ªpodçš„IPå‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œendpointå’ŒKUBE-SVC-XXXè§„åˆ™ä¼šç›¸åº”å˜åŒ–</p>
</li>
<li>
<p><code>endpoint</code>æ˜¯k8sçš„å¦ä¸€ä¸ªå¯¹è±¡ï¼Œç”Ÿæˆä¸€ä¸ª<code>service</code>çš„æ—¶å€™ï¼Œä¼šç›¸å¯¹åº”ç”Ÿæˆä¸€ä¸ª<code>endpoint</code>.</p>
<p>$ kubectl get ep -n sheild-1 eric-act-activation-mml<br>
NAME         ENDPOINTS                           AGE<br>
eric-act-activation-mml  192.168.15.102:8111,192.168.15.102:8010   1h</p>
</li>
</ul>
<h3 id="è¯·æ±‚ä»£ç†çš„ä¸‰ç§æ–¹å¼"><a class="header-anchor" href="#è¯·æ±‚ä»£ç†çš„ä¸‰ç§æ–¹å¼"></a>è¯·æ±‚ä»£ç†çš„ä¸‰ç§æ–¹å¼</h3>
<p>å…¨æ–‡å‚è€ƒé“¾æ¥äºŒé‡Œé¢æœ‰ä¸‰ç§æ–¹å¼ã€‚ç”±äºç½‘ç»œåŸºç¡€è¾ƒå·®ï¼Œå…ˆè®°å½•åœ¨è¿™é‡Œï¼š</p>
<ul>
<li>Userspace æ¨¡å¼ï¼šè¿™ç§æ¨¡å¼å®Œå…¨ä¾é <code>kube-proxy</code>æ¥ï¼Œ<em>Userspaceæ¨¡å¼çš„ä»£ç†è½¬å‘ä¸»è¦ä¾é kube-proxyå®ç°ï¼Œå·¥ä½œåœ¨ç”¨æˆ·æ€ã€‚æ‰€ä»¥ï¼Œè½¬å‘æ•ˆç‡ä¸é«˜</em></li>
<li>iptables æ¨¡å¼: ä¹Ÿå°±æ˜¯ä¸Šé¢ç¨åŠ è§£é‡Šçš„æ–¹æ³•ï¼Œæ˜¯ç›®å‰çš„é»˜è®¤æ¨¡å¼ã€‚</li>
</ul>
<p><em>ä¸userspaceæ¨¡å¼æœ€å¤§çš„ä¸åŒç‚¹åœ¨äºï¼Œkube-proxyåªåŠ¨æ€åœ°ç»´æŠ¤iptablesï¼Œè€Œè½¬å‘å®Œå…¨é iptableså®ç°ã€‚ç”±äºiptableså·¥ä½œåœ¨å†…æ ¸æ€ï¼Œä¸ç”¨åœ¨ç”¨æˆ·æ€ä¸å†…æ ¸æ€åˆ‡æ¢ï¼Œæ‰€ä»¥ç›¸æ¯”userspaceæ¨¡å¼æ›´é«˜æ•ˆä¹Ÿæ›´å¯é ã€‚ä½†æ˜¯æ¯ä¸ªæœåŠ¡éƒ½ä¼šç”Ÿæˆè‹¥å¹²æ¡iptablesè§„åˆ™ï¼Œå¤§å‹é›†ç¾¤iptablesè§„åˆ™æ•°ä¼šéå¸¸å¤šï¼Œé€ æˆæ€§èƒ½ä¸‹é™ä¹Ÿä¸æ˜“æ’æŸ¥é—®é¢˜ã€‚</em></p>
<ul>
<li>ipvs æ¨¡å¼: åœ¨v1.9ç‰ˆæœ¬ä»¥åï¼ŒæœåŠ¡æ–°å¢äº†ipvsè½¬å‘æ–¹å¼.</li>
</ul>
<p><em>ipvsåŒæ ·å·¥ä½œåœ¨å†…æ ¸æ€ï¼Œè€Œä¸”åº•å±‚è½¬å‘æ˜¯ä¾é hashè¡¨å®ç°ï¼Œæ‰€ä»¥æ€§èƒ½æ¯”iptablesè¿˜è¦å¥½çš„å¤šï¼ŒåŒæ­¥æ–°è§„åˆ™ä¹Ÿæ¯”iptableså¿«ã€‚åŒæ—¶ï¼Œè´Ÿè½½å‡è¡¡çš„æ–¹å¼é™¤äº†ç®€å•rrè¿˜æœ‰å¤šç§é€‰æ‹©ï¼Œæ‰€ä»¥å¾ˆé€‚åˆåœ¨å¤§å‹é›†ç¾¤ä½¿ç”¨ã€‚è€Œç¼ºç‚¹å°±æ˜¯å¸¦æ¥äº†é¢å¤–çš„é…ç½®ç»´æŠ¤æ“ä½œã€‚</em></p>
<h3 id="å‚è€ƒé“¾æ¥-v2"><a class="header-anchor" href="#å‚è€ƒé“¾æ¥-v2"></a>å‚è€ƒé“¾æ¥</h3>
<ul>
<li>å‚è€ƒé“¾æ¥ï¼š
<ul>
<li><a href="https://blog.csdn.net/u011563903/article/details/86692694" target="_blank" rel="noopener">K8S kube-proxy iptables åŸç†åˆ†æ</a></li>
</ul>
</li>
</ul>
<h2 id="æœåŠ¡å‘ç°"><a class="header-anchor" href="#æœåŠ¡å‘ç°"></a>æœåŠ¡å‘ç°</h2>
<p>å…ˆåŒºåˆ†ä¸€ä¸‹ä¸Šé¢çš„è¯·æ±‚è½¬å‘å’Œè¿™é‡Œçš„æœåŠ¡å‘ç°ã€‚<br>
è¯·æ±‚çš„è¯é€šå¸¸æ˜¯ç«¯å£å·+åœ°å€å°±è¡Œå•¦ã€‚æœåŠ¡å‘ç°è¦èƒ½å¤Ÿå‘ç°è¿™ä¸ªserviceæ‰è¡Œã€‚å°±æ˜¯å¦‚ä½•è®©å¦ä¸€ä¸ªserviceçŸ¥é“è¿™ä¸ªserviceçš„ipæˆ–è€…hostnameï¼Œæˆ–è€…è®©k8så¤–çš„å®¢æˆ·çŸ¥é“æŸä¸ªserviceçš„ipå’Œç«¯å£</p>
<h3 id="å†…éƒ¨æœåŠ¡å‘ç°"><a class="header-anchor" href="#å†…éƒ¨æœåŠ¡å‘ç°"></a>å†…éƒ¨æœåŠ¡å‘ç°</h3>
<p>å†…éƒ¨æœåŠ¡å‘ç°æœ‰ä¸¤ç§æ–¹å¼ï¼šç¯å¢ƒå˜é‡å’ŒDNS</p>
<h3 id="å¤–éƒ¨æœåŠ¡å‘ç°"><a class="header-anchor" href="#å¤–éƒ¨æœåŠ¡å‘ç°"></a>å¤–éƒ¨æœåŠ¡å‘ç°</h3>
<p>å¤–éƒ¨æœåŠ¡å‘ç°ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯k8sæœåŠ¡å™¨ä»¥å¤–æ¥å‘ç°æŸä¸ªserviceæä¾›çš„æœåŠ¡</p>
<ul>
<li>å‚è€ƒé“¾æ¥ï¼š
<ul>
<li><a href="https://www.cnblogs.com/chris-cp/p/6724057.html" target="_blank" rel="noopener">k8så®æˆ˜ä¹‹Service</a></li>
</ul>
</li>
</ul>
<h4 id="nodeport"><a class="header-anchor" href="#nodeport"></a>NodePort</h4>
<p>nodePort å’Œ nodeæ˜¯ä¸€å¯¹ï¼Œé¦–å…ˆè¦ç†è§£ä¸€ä¸‹nodeçš„æ¦‚å¿µã€‚è¿™è¾¹çš„nodeç›¸å½“äºæ˜¯VMã€‚<br>
å°±æ˜¯è¿™æ ·çš„ï¼Œæˆ‘æœ‰ä¸€å¥—ç¡¬ä»¶ï¼Œç„¶åæˆ‘åœ¨ä¸Šè¾¹æ­k8sï¼Œk8sä¼šå…ˆæ­å‡ºä¸€å †nodeæ¥ï¼Œç„¶åå†åœ¨è¿™å †nodeä¸Šè¾¹å»ºnamespaceï¼Œæ¯ä¸ªnamespaceé‡Œé¢å†å»ºpodå•Šä¹‹ç±»çš„ã€‚<br>
æ‰€ä»¥å¯ä»¥ç†è§£æˆVMï¼Œé‚£ä¹ˆè¿™ä¸ªIPæ˜¯å¯ä»¥è®¿é—®åˆ°çš„ã€‚<br>
è¿™æ ·NodePortå°±å®¹æ˜“ç†è§£äº†ã€‚</p>
<p><em>NodePort Serviceæ˜¯ç±»å‹ä¸ºNodePortçš„Serviceï¼Œ k8sé™¤äº†ä¼šåˆ†é…ç»™NodePort Serviceä¸€ä¸ªå†…éƒ¨çš„è™šæ‹ŸIPï¼Œå¦å¤–ä¼šåœ¨æ¯ä¸€ä¸ªNodeä¸Šæš´éœ²ç«¯å£NodePortï¼Œå¤–éƒ¨ç½‘ç»œå¯ä»¥é€šè¿‡[NodeIP]:[NodePort]è®¿é—®åˆ°Serviceã€‚</em></p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒNodePort serviceä¼šåœ¨æ¯ä¸ªnodeä¸Šé¢æ³¨å†Œè‡ªå·±ã€‚æ‰€ä»¥å¦‚æœä¸€å¥—namespaceæ˜¯æ­åœ¨å¥½å‡ ä¸ªnodeä¸Šé¢çš„ï¼Œåº”è¯¥éƒ½èƒ½è®¿é—®åˆ°</p>
<p><em>è¯¥æ–¹å¼æŠŠæœåŠ¡æš´éœ²åœ¨æ¯ä¸ªNodeä¸»æœºIPçš„ç‰¹å®šç«¯å£ä¸Š,åŒä¸€ä¸ªæœåŠ¡åœ¨æ‰€æœ‰Nodeä¸Šç«¯å£æ˜¯ç›¸åŒçš„ï¼Œå¹¶è‡ªåŠ¨ç”Ÿæˆç›¸åº”çš„è·¯ç”±è½¬å‘åˆ°ClusterIP</em></p>
<p>æ‰€ä»¥NodePortçš„serviceä¹Ÿæ˜¯æœ‰cluster IPçš„ã€‚</p>
<h4 id="loadbalancer"><a class="header-anchor" href="#loadbalancer"></a>LoadBalancer</h4>
<h4 id="ingress"><a class="header-anchor" href="#ingress"></a>Ingress</h4>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/hexo_blog/2019/08/22/5G/" rel="next" title="5G">
                <i class="fa fa-chevron-left"></i> 5G
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/hexo_blog/2019/11/08/TLSç›¸å…³çŸ¥è¯†/" rel="prev" title="TLSç›¸å…³çŸ¥è¯†">
                TLSç›¸å…³çŸ¥è¯† <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      
        <div id="gitment-container"></div>
      
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Lynn Shen</p>
              <p class="site-description motion-element" itemprop="description">35å²å¼€å§‹çš„åšå®¢ï¼Œæœ‰ç‚¹æ™šå“¦</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/hexo_blog/archives/">
              
                  <span class="site-state-item-count">37</span>
                  <span class="site-state-item-name">æ—¥å¿—</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/hexo_blog/categories/index.html">
                  <span class="site-state-item-count">8</span>
                  <span class="site-state-item-name">åˆ†ç±»</span>
                </a>
              </div>
            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#å‚è€ƒé“¾æ¥"><span class="nav-number">1.</span> <span class="nav-text">å‚è€ƒé“¾æ¥</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ä¸ºä»€ä¹ˆéœ€è¦service"><span class="nav-number">2.</span> <span class="nav-text">ä¸ºä»€ä¹ˆéœ€è¦service</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#services"><span class="nav-number">3.</span> <span class="nav-text">Services</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æš´éœ²serviceçš„å‘½ä»¤"><span class="nav-number">4.</span> <span class="nav-text">æš´éœ²serviceçš„å‘½ä»¤</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#yamlæ–‡ä»¶"><span class="nav-number">4.1.</span> <span class="nav-text">yamlæ–‡ä»¶</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#è¯·æ±‚è½¬å‘"><span class="nav-number">5.</span> <span class="nav-text">è¯·æ±‚è½¬å‘</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#endpoint"><span class="nav-number">5.1.</span> <span class="nav-text">endpoint</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#è¯·æ±‚ä»£ç†çš„ä¸‰ç§æ–¹å¼"><span class="nav-number">5.2.</span> <span class="nav-text">è¯·æ±‚ä»£ç†çš„ä¸‰ç§æ–¹å¼</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å‚è€ƒé“¾æ¥-v2"><span class="nav-number">5.3.</span> <span class="nav-text">å‚è€ƒé“¾æ¥</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æœåŠ¡å‘ç°"><span class="nav-number">6.</span> <span class="nav-text">æœåŠ¡å‘ç°</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#å†…éƒ¨æœåŠ¡å‘ç°"><span class="nav-number">6.1.</span> <span class="nav-text">å†…éƒ¨æœåŠ¡å‘ç°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å¤–éƒ¨æœåŠ¡å‘ç°"><span class="nav-number">6.2.</span> <span class="nav-text">å¤–éƒ¨æœåŠ¡å‘ç°</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#nodeport"><span class="nav-number">6.2.1.</span> <span class="nav-text">NodePort</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#loadbalancer"><span class="nav-number">6.2.2.</span> <span class="nav-text">LoadBalancer</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ingress"><span class="nav-number">6.2.3.</span> <span class="nav-text">Ingress</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Lynn Shen</span>

  
</div>


  <div class="powered-by">ç”± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¢˜ &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/hexo_blog/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/hexo_blog/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/hexo_blog/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/hexo_blog/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/hexo_blog/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/hexo_blog/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/hexo_blog/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/hexo_blog/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/hexo_blog/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/hexo_blog/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/hexo_blog/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/hexo_blog/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/hexo_blog/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  







<!-- LOCAL: You can save these files to your site and update links -->
    
        
        <link rel="stylesheet" href="https://billts.site/extra_css/gitment.css">
        <script src="https://billts.site/js/gitment.js"></script>
    
<!-- END LOCAL -->

    

    
      <script type="text/javascript">
      function renderGitment(){
        var gitment = new Gitment({
            id: window.location.pathname, 
            owner: 'sallyslove',
            repo: 'blog_comments',
            
            oauth: {
            
            
                client_secret: '6eefacd862f6eee016278732c7470c216afce267',
            
                client_id: '2fca3ca261d5bf6d52eb'
            }});
        gitment.render('gitment-container');
      }

      
      renderGitment();
      
      </script>
    







  





  

  

  

  
  

  

  

  

</body>
</html>
